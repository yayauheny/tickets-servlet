# Tickets - Clevertec
### Используемый стек
Java 17, Gradle 7.5, PostgreSQL 15.1.1, JUnit5, Patterns [Builder, Singleton, Factory, Dynamic Proxy]
### Инструкция по запуску
- Запустить TicketRunner.class
- Ввести данные для формирования чека в формате id-q id-q card-id, где id - id товаров/карты, q - количество товаров
- Если требуется, повторно ввести данные для формирования чека (В этом случае будет создан еще один чек с порядковым номером в папке tickets)
- Если требуется, ввести путь к файлу (работает с файлами .txt) для вывода содержимого чека в консоль
- Ввести 'exit' (без кавычек) для выхода из приложения
### Реализация
- Проект написан с использованием PostgreSQL. Создается 2 таблицы, product и discount_card, которые заполняются данными
- Паттерн Builder в классах Product, Card, которые со связанными классами находится в папке [product]
- Паттерн Singleton в классах ProductDao, CardDao
- Паттерн Factory в классах кеширования, служащих для кеширования БД. Данные о типе и размере кеша хранятся в application.yml
- Паттерн Dynamic Proxy в классах CardService, ProductService для кеширования данных из БД
### Особенности реализации
- Возможность создавать безграничное количество чеков (информация о порядковом номере будет отображаться в пункте чека [Cashier] и в созданном файле tickets/)
- При вводе несуществующей карты, пользователю присваивается новая карта со скидкой 0%, и порядковым номером чека.
- Возможность выхода из программы путем ввода команды exit
- Возможность задавать новую компанию, где указывается ее название, адрес, процент скидки товарной позиции (если кол-во товара больше Constants.DISCOUNT_AFTER и данная позиция является акционной), валюта (BYN, USD, EUR)
- Чек предусматривает информирование о скидке по конкретным позициям товара, а также общий размер скидки, включая скидку по карте (от общей стоимости чека)
- Реализовано кеширование всех данных из БД (в зависимости от выбранного типа, LFU/LRU)
### To do
- Мигрировать БД
- Проверить считываемый с консоли файл на принадлежность к чеку с помощью RegEx
- Servlets
